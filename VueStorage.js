!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("vue")):"function"==typeof define&&define.amd?define(["vue"],e):t.VueStorage=e(t.Vue)}(this,function(t){"use strict";var e=function(t){return"function"==typeof t},n=function(t){return function(){return t}},o=function(t){return null===t||void 0===t},r=new(t=t&&t.hasOwnProperty("default")?t.default:t)({data:{ownStorage:{}},created:function(){window.addEventListener("storage",this.storageEventListener)},destroyed:function(){window.removeEventListener("storage",this.storageEventListener)},computed:{storageEventListener:function(){return this.onStorage.bind(this)}},methods:{onStorage:function(t){this.setItemToOwnStorage(t.key,t.newValue)},getItem:function(t){return this.hasItemInOwnStorage(t)||this.setItemToOwnStorage(t,this.getItemFromLocalStorage(t)),this.getItemFromOwnStorage(t)},setItem:function(t,e){this.setItemToLocalStorage(t,e),this.setItemToOwnStorage(t,e)},hasItemInOwnStorage:function(t){return function(t,e){Object.prototype.hasOwnProperty.call(t,e)}(this.ownStorage,t)},getItemFromOwnStorage:function(t){return this.ownStorage[t]},getItemFromLocalStorage:function(t){return localStorage.getItem(t)},setItemToOwnStorage:function(t,e){o(e)&&(e=null),Vue.set(this.ownStorage,t,e)},setItemToLocalStorage:function(t,e){o(e)?localStorage.removeItem(t):localStorage.setItem(t,e)}}}),i={beforeCreate:function(){var t=this,i=this.$options.stored;i&&Object.entries(i).forEach(function(i){var a,u=i[0],s=i[1];a=e(s.key)?s.key.bind(t):n(o(s.key)?u:String(s.key));var f;f=e(s.default)?s.default.bind(t):n(s.default);var c,g;s.type===JSON?(c=JSON.parse.bind(JSON),g=JSON.stringify.bind(JSON)):function(t){return t&&"object"==typeof t}(s.type)&&e(s.type.parse)&&e(s.type.stringify)?(c=s.type.parse.bind(t),g=s.type.stringify.bind(t)):(c=String,g=String),t.$options.computed[u]={get:function(){var t=a(),e=r.getItem(t);return e=o(e)?f():c(e)},set:function(t){var e=a();o(t)||(t=g(t)),r.setItem(e,t)}}})},computed:{}},a={mixin:i,install:function(t){t.mixin(i)}};return"undefined"!=typeof window&&t.use(a),a});
