!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("vue")):"function"==typeof define&&define.amd?define(["vue"],e):t.VueStorage=e(t.Vue)}(this,function(t){"use strict";var e=function(t){return function(){return t}},n=function(t){return"function"==typeof t},o=function(){},r=function(t){return t&&"object"==typeof t},i=function(t){return null===t||void 0===t},a=new(t=t&&t.hasOwnProperty("default")?t.default:t)({data:function(){return{storage:{}}},created:function(){window.addEventListener("storage",this.storageEventListener)},beforeDestroy:function(){window.removeEventListener("storage",this.storageEventListener)},computed:{storageEventListener:function(){return this.onStorage.bind(this)}},methods:{onStorage:function(t){this.setItemToPrivateStorage(t.key,t.newValue)},getItem:function(t){return this.hasItemInPrivateStorage(t)||this.setItemToPrivateStorage(t,this.getItemFromLocalStorage(t)),this.getItemFromPrivateStorage(t)},setItem:function(t,e){this.setItemToLocalStorage(t,e),this.setItemToPrivateStorage(t,e)},hasItemInPrivateStorage:function(t){return function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(this.storage,t)},getItemFromPrivateStorage:function(t){return this.storage[t]},getItemFromLocalStorage:function(t){return localStorage.getItem(t)},setItemToPrivateStorage:function(t,e){i(e)&&(e=null),Vue.set(this.storage,t,e)},setItemToLocalStorage:function(t,e){i(e)?localStorage.removeItem(t):localStorage.setItem(t,e)}}}),u={beforeCreate:function(){var t=this,u=this.$options.stored;u&&Object.entries(u).forEach(function(u){var s=u[0],f=u[1],c=e(s),g=o,d=String,m=String;r(f)&&(c=n(f.key)?f.key.bind(t):e(String(f.key)),g=n(f.default)?f.default.bind(t):e(f.default),f.type===JSON?(d=JSON.parse.bind(JSON),m=JSON.stringify.bind(JSON)):r(f.type)&&(n(f.type.parse)&&(d=f.type.parse.bind(t)),n(f.type.stringify)&&(m=f.type.stringify.bind(t)))),t.$options.computed[s]={get:function(){var t=c(),e=a.getItem(t);return e=i(e)?g():d(e)},set:function(t){var e=c();i(t)||(t=m(t)),a.setItem(e,t)}}})},computed:{}},s={mixin:u,install:function(t){t.mixin(u)}};return"undefined"!=typeof window&&t.use(s),s});
