!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue-demi")):"function"==typeof define&&define.amd?define(["exports","vue-demi"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).VueStorage={},e.VueDemi)}(this,(function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u,o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n(this,e),Object.assign(this,{_items:{},_storage:t})}var i,u,o;return i=e,(u=[{key:"getItem",value:function(e){var n=this._items,r=n[e];if(!r){var i=this._storage,u=i?i.getItem(e):null;r=t.ref(u),n[e]=r}return r.value}},{key:"setItem",value:function(e,t){var n=this._storage;n&&n.setItem(e,t),this._setItem(e,t)}},{key:"_setItem",value:function(e,t){var n=this._items[e];n&&(n.value="".concat(t))}},{key:"removeItem",value:function(e){var t=this._storage;t&&t.removeItem(e),this._removeItem(e)}},{key:"_removeItem",value:function(e){var t=this._items[e];t&&(t.value=null)}},{key:"clear",value:function(){var e=this._storage;e&&e.clear(),this._clear()}},{key:"_clear",value:function(){var e=this._items;Object.values(e).forEach((function(e){e.value=null}))}}])&&r(i.prototype,u),o&&r(i,o),e}(),a=function(){var e=globalThis.window;if(e){var t=e.localStorage;if(t){var n=new o(t);return e.addEventListener("storage",(function(e){var t=e.key,r=e.newValue;null==r?n._removeItem(t):n._setItem(t,r)})),n}}return new o}(),s=function(){var e=globalThis.window;if(e){var t=e.sessionStorage;if(t)return new o(t)}return new o}(),l=(i(u={},1,"TEXT"),i(u,2,"CLASS"),i(u,4,"STYLE"),i(u,8,"PROPS"),i(u,16,"FULL_PROPS"),i(u,32,"HYDRATE_EVENTS"),i(u,64,"STABLE_FRAGMENT"),i(u,128,"KEYED_FRAGMENT"),i(u,256,"UNKEYED_FRAGMENT"),i(u,1024,"DYNAMIC_SLOTS"),i(u,512,"NEED_PATCH"),i(u,-1,"HOISTED"),i(u,-2,"BAIL"),{}),f=function(e){return"function"==typeof e},c={parse:function(e){return Boolean(JSON.parse(e))},stringify:function(e){return String(Boolean(e))}},v={parse:function(e){return Number(JSON.parse(e))},stringify:function(e){return String(Number(e))}},m={parse:String,stringify:String};e.localStorage=a,e.sessionStorage=s,e.stored=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,r=n.default,i=void 0===r?null:r,u=n.session,o=void 0!==u&&u,g=n.type,d=void 0===g?JSON:g,_=function(e){return f(e)?e:t.isRef(e)?function(){return e.value}:function(){return e}},h=_(e),y=_(i),S=_(o),p=function(){return S()?s:a},b=function(e){switch(e){case Boolean:return c;case Number:return v;case String:return m}return e}(d),E=b.parse,I=b.stringify;return t.computed({get:function(){var e=p(),t=h(),n=e.getItem(t);return n=null==n?y():E(n)},set:function(e){var t=p(),n=h();null==e?t.removeItem(n):(e=I(e),t.setItem(n,e))}})},Object.defineProperty(e,"__esModule",{value:!0})}));
